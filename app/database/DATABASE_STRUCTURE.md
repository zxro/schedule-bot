# üìö –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è

## üë§ –¢–∞–±–ª–∏—Ü–∞ `users`

–•—Ä–∞–Ω–∏—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è—Ö.

| –ü–æ–ª–µ        | –¢–∏–ø        | –û–ø–∏—Å–∞–Ω–∏–µ                                  |
| ----------- | ---------- | ---------------------------------------- |
| `id`        | INTEGER PK | Telegram ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è                  |
| `group_id`  | INTEGER FK | –°—Å—ã–ª–∫–∞ –Ω–∞ `groups.id` (–≥—Ä—É–ø–ø–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è) |
| `faculty_id`| INTEGER FK | –°—Å—ã–ª–∫–∞ –Ω–∞ `faculties.id` (—Ñ–∞–∫—É–ª—å—Ç–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è) |
| `role`      | INTEGER    | –†–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (0 ‚Äî –æ–±—ã—á–Ω—ã–π, 1 ‚Äî –∞–¥–º–∏–Ω) |

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**

* `group_id` –∏ `faculty_id` –º–æ–≥—É—Ç –±—ã—Ç—å `NULL`.
* –ü—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –≥—Ä—É–ø–ø—ã –∏–ª–∏ —Ñ–∞–∫—É–ª—å—Ç–µ—Ç–∞ —Å–≤—è–∑—å –æ–±–Ω—É–ª—è–µ—Ç—Å—è (`ON DELETE SET NULL`).
* –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–Ω–¥–µ–∫—Å –ø–æ `id`.

---

## üèõ –¢–∞–±–ª–∏—Ü–∞ `faculties`

–•—Ä–∞–Ω–∏—Ç —Å–ø–∏—Å–æ–∫ —Ñ–∞–∫—É–ª—å—Ç–µ—Ç–æ–≤.

| –ü–æ–ª–µ   | –¢–∏–ø                      | –û–ø–∏—Å–∞–Ω–∏–µ                            |
| ------ | ------------------------ | ----------------------------------- |
| `id`   | INTEGER PK               | –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä —Ñ–∞–∫—É–ª—å—Ç–µ—Ç–∞ |
| `name` | TEXT                     | –ù–∞–∑–≤–∞–Ω–∏–µ —Ñ–∞–∫—É–ª—å—Ç–µ—Ç–∞ (—É–Ω–∏–∫–∞–ª—å–Ω–æ–µ)    |

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**

* –ü–æ–ª–µ `name` —É–Ω–∏–∫–∞–ª—å–Ω–æ.
* –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–∞–∫ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∞—è —Å—É—â–Ω–æ—Å—Ç—å –¥–ª—è –≥—Ä—É–ø–ø.
* –°–≤—è–∑—å —Å —Ç–∞–±–ª–∏—Ü–µ–π `groups` —á–µ—Ä–µ–∑ `faculty_id`.

---

## üë• –¢–∞–±–ª–∏—Ü–∞ `groups`

–•—Ä–∞–Ω–∏—Ç —Å–ø–∏—Å–æ–∫ —É—á–µ–±–Ω—ã—Ö –≥—Ä—É–ø–ø.

| –ü–æ–ª–µ         | –¢–∏–ø        | –û–ø–∏—Å–∞–Ω–∏–µ                                      |
| ------------ | ---------- | --------------------------------------------- |
| `id`         | INTEGER PK | –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –≥—Ä—É–ø–ø—ã               |
| `group_name` | TEXT       | –ù–∞–∑–≤–∞–Ω–∏–µ –≥—Ä—É–ø–ø—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, `–ü–ú–∏–ö-37`), —É–Ω–∏–∫–∞–ª—å–Ω–æ |
| `faculty_id` | INTEGER    | –°—Å—ã–ª–∫–∞ –Ω–∞ `faculties.id` (—Ñ–∞–∫—É–ª—å—Ç–µ—Ç)         |

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**

* `group_name` —É–Ω–∏–∫–∞–ª—å–Ω–æ, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ø–æ–∏—Å–∫–∞ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è.
* –ü—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ —Ñ–∞–∫—É–ª—å—Ç–µ—Ç–∞ —Å–≤—è–∑—å –æ–±–Ω—É–ª—è–µ—Ç—Å—è (`ON DELETE SET NULL`).
* –°–≤—è–∑—å —Å —Ç–∞–±–ª–∏—Ü–µ–π `lessons` —á–µ—Ä–µ–∑ `group_id`.

---

## ‚è∞ –¢–∞–±–ª–∏—Ü–∞ `lessons`

–•—Ä–∞–Ω–∏—Ç —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –∑–∞–Ω—è—Ç–∏–π.

| –ü–æ–ª–µ            | –¢–∏–ø                        | –û–ø–∏—Å–∞–Ω–∏–µ                                          |
| --------------- | -------------------------- |---------------------------------------------------|
| `id`            | INTEGER PK                 | –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∑–∞–Ω—è—Ç–∏—è                  |
| `group_id`      | INTEGER FK                 | –°—Å—ã–ª–∫–∞ –Ω–∞ `groups.id`                             |
| `weekday`       | INTEGER                    | –î–µ–Ω—å –Ω–µ–¥–µ–ª–∏ (1 = –ü–Ω, 7 = –í—Å)                      |
| `lesson_number` | INTEGER                    | –ù–æ–º–µ—Ä –ø–∞—Ä—ã                                        |
| `subject`       | TEXT                       | –ù–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–µ–¥–º–µ—Ç–∞                                 |
| `professors`    | TEXT                       | –ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–∏                                     |
| `rooms`         | TEXT                       | –ê—É–¥–∏—Ç–æ—Ä–∏—è                                         |
| `week_mark`     | TEXT                       | –ú–µ—Ç–∫–∞ –Ω–µ–¥–µ–ª–∏ (`every`, `plus`, `minus`)           |
| `type`          | TEXT                       | –¢–∏–ø –∑–∞–Ω—è—Ç–∏—è (`classes`, `exam`, `retake`) |

**–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è:**

* –£–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏ `(group_id, weekday, lesson_number, subject, professors, rooms, week_mark, type)` –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –¥—É–±–ª–∏.
* –ü—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –≥—Ä—É–ø–ø—ã –≤—Å–µ –µ—ë –∑–∞–Ω—è—Ç–∏—è —É–¥–∞–ª—è—é—Ç—Å—è (`ON DELETE CASCADE`).

---

## üë®‚Äçüè´ –¢–∞–±–ª–∏—Ü–∞ `professors`

–•—Ä–∞–Ω–∏—Ç —Å–ø–∏—Å–æ–∫ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–µ–π.

| –ü–æ–ª–µ   | –¢–∏–ø        | –û–ø–∏—Å–∞–Ω–∏–µ                               |
| ------ | ---------- | -------------------------------------- |
| `id`   | INTEGER PK | –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è |
| `name` | TEXT       | –§–∞–º–∏–ª–∏—è –∏ –∏–Ω–∏—Ü–∏–∞–ª—ã –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è       |

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**

* –ü–æ–ª–µ `name` —É–Ω–∏–∫–∞–ª—å–Ω–æ –∏ –∏–Ω–¥–µ–∫—Å–∏—Ä—É–µ—Ç—Å—è.
* –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Å–≤—è–∑–∏ —Å —Ç–∞–±–ª–∏—Ü–µ–π `professor_lessons`.

---

## üìñ –¢–∞–±–ª–∏—Ü–∞ `professor_lessons`

–•—Ä–∞–Ω–∏—Ç —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è.

| –ü–æ–ª–µ           | –¢–∏–ø        | –û–ø–∏—Å–∞–Ω–∏–µ                               |
| -------------- | ---------- | -------------------------------------- |
| `id`           | INTEGER PK | –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∑–∞–ø–∏—Å–∏         |
| `professor_id` | INTEGER FK | –°—Å—ã–ª–∫–∞ –Ω–∞ `professors.id`               |
| `weekday`      | INTEGER    | –î–µ–Ω—å –Ω–µ–¥–µ–ª–∏ (1 = –ü–Ω, 7 = –í—Å)           |
| `lesson_number`| INTEGER    | –ù–æ–º–µ—Ä –ø–∞—Ä—ã                              |
| `subject`      | TEXT       | –ü—Ä–µ–¥–º–µ—Ç                                 |
| `rooms`        | TEXT       | –ê—É–¥–∏—Ç–æ—Ä–∏—è                               |
| `week_mark`    | TEXT       | –ú–µ—Ç–∫–∞ –Ω–µ–¥–µ–ª–∏ (`every`, `plus`, `minus`) |

**–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è:**

* –£–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å `(professor_id, weekday, lesson_number, subject, rooms, week_mark)`.
* –ü—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è –≤—Å–µ –µ–≥–æ –∑–∞–Ω—è—Ç–∏—è —É–¥–∞–ª—è—é—Ç—Å—è (`ON DELETE CASCADE`).

---

## üîó –°–≤—è–∑–∏ –º–µ–∂–¥—É —Ç–∞–±–ª–∏—Ü–∞–º–∏

* **`faculties (1) ‚Üî (N) groups`** ‚Äî –æ–¥–∏–Ω —Ñ–∞–∫—É–ª—å—Ç–µ—Ç –º–æ–∂–µ—Ç –∏–º–µ—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –≥—Ä—É–ø–ø.
* **`groups (1) ‚Üî (N) lessons`** ‚Äî –æ–¥–Ω–∞ –≥—Ä—É–ø–ø–∞ –∏–º–µ–µ—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–æ –∑–∞–Ω—è—Ç–∏–π.
* **`groups ‚Üî users`** ‚Äî —Å–≤—è–∑—å —á–µ—Ä–µ–∑ `group_id`.
* **`faculties ‚Üî users`** ‚Äî —Å–≤—è–∑—å —á–µ—Ä–µ–∑ `faculty_id`.
* **`professors (1) ‚Üî (N) professor_lessons`** ‚Äî –æ–¥–∏–Ω –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å –∏–º–µ–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –∑–∞–Ω—è—Ç–∏–π.

---

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

* **week_mark**:

  * `"every"` ‚Äî –∑–∞–Ω—è—Ç–∏–µ –ø—Ä–æ–≤–æ–¥–∏—Ç—Å—è –∫–∞–∂–¥—É—é –Ω–µ–¥–µ–ª—é.
  * `"plus"` ‚Äî —Ç–æ–ª—å–∫–æ –ø–æ —á—ë—Ç–Ω—ã–º –Ω–µ–¥–µ–ª—è–º.
  * `"minus"` ‚Äî —Ç–æ–ª—å–∫–æ –ø–æ –Ω–µ—á—ë—Ç–Ω—ã–º –Ω–µ–¥–µ–ª—è–º.

* **withDates**: –µ—Å–ª–∏ –≤ JSON –ø–æ–ª–µ `"withDates": false`, —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –ø–æ–≤—Ç–æ—Ä—è–µ—Ç—Å—è –ø–æ –Ω–µ–¥–µ–ª—è–º, –∏ –ø–æ–ª–µ `date` –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ `weekday`.

---

## üîç –ò–Ω–¥–µ–∫—Å—ã –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è –≤—ã–±–æ—Ä–æ–∫

* `idx_groups_name` ‚Äî –∏–Ω–¥–µ–∫—Å –ø–æ `groups.group_name`.
* `idx_lessons_group_id` ‚Äî –∏–Ω–¥–µ–∫—Å –ø–æ `lessons.group_id`.
* `idx_users_group_id` ‚Äî –∏–Ω–¥–µ–∫—Å –ø–æ `users.group_id`.
* `idx_users_faculty_id` ‚Äî –∏–Ω–¥–µ–∫—Å –ø–æ `users.faculty_id`.
* `idx_professors_name` ‚Äî –∏–Ω–¥–µ–∫—Å –ø–æ `professors.name`.
